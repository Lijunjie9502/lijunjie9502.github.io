---
author: 
  name: 木子识时务
  link: https://github.com/sbwcwso
editLink: true
title: 第 4 章 语句
date: 2021-08-11 00:16:49
permalink: /pages/c1c8a9/
categories: 
  - c 和指针
tags: 
  - c
---

# 第 4 章 语句

* 在本章中，你将会发现C实现了其他现代高级语言所具有的所有语句
  * 它们中的绝大多数都是按照你所预期的方式工作的
  * `if` 语句用于在几段备选代码中选择运行其中的一段
  * 而 `while`、`for` 和 `do` 语句则用于实现不同类型的循环

* 但是，和其他语言相比，C的语句还是存在一些不同之处
  * C并不具备专门的赋值语句，而是统一用“表达式语句”代替
  * `switch` 语句实现了其他语言中 `case` 语句的功能，但其实现的方式却非比寻常

<!-- more -->

::: details 书本内容
![20210811003349-2021-08-11-00-33-49](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210811003349-2021-08-11-00-33-49.png)
:::


```markmap
- [第 4 章 语句](#第-4-章-语句)
  - [空语句](#空语句)
  - [表达式语句](#表达式语句)
  - [代码块](#代码块)
  - [`if` 语句](#if-语句)
  - [`while` 语句](#while-语句)
    - [`break` 和 `continue` 语句](#break-和-continue-语句)
    - [`while` 语句的执行过程](#while-语句的执行过程)
  - [`for` 语句](#for-语句)
  - [`do` 语句](#do-语句)
  - [`switch` 语句](#switch-语句)
    - [`switch` 中的 `break` 语句](#switch-中的-break-语句)
    - [`default` 子句](#default-子句)
    - [`switch` 语句的执行过程](#switch-语句的执行过程)
  - [`goto` 语句](#goto-语句)
  - [总结](#总结)
  - [问题](#问题)
  - [编程练习](#编程练习)
```

## 空语句

::: details 书本内容
![20210811003606-2021-08-11-00-36-06](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210811003606-2021-08-11-00-36-06.png)
:::

## 表达式语句

::: details 书本内容
![4-2-2021-08-11-00-57-45](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-2-2021-08-11-00-57-45.png)
:::

## 代码块

::: details 书本内容
![20210811003659-2021-08-11-00-36-59](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210811003659-2021-08-11-00-36-59.png)
:::

## `if` 语句

::: details 书本内容
![4-4-2021-08-11-00-58-03](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-4-2021-08-11-00-58-03.png)
:::

## `while` 语句

::: details 书本内容
![4-5-2021-08-11-01-00-28](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-5-2021-08-11-01-00-28.png)
:::

### `break` 和 `continue` 语句

::: details 书本内容
![20210811003837-2021-08-11-00-38-37](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210811003837-2021-08-11-00-38-37.png)
:::

### `while` 语句的执行过程

::: details 书本内容
![4-5-2-2021-08-11-01-00-43](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-5-2-2021-08-11-01-00-43.png)
:::

## `for` 语句

::: details 书本内容
![4-6-2021-08-11-01-01-44](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-6-2021-08-11-01-01-44.png)
:::

## `do` 语句

::: details 书本内容
![4-7-2021-08-11-01-02-05](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-7-2021-08-11-01-02-05.png)
:::

## `switch` 语句

::: details 书本内容
![4-8-2021-08-11-01-03-48](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-8-2021-08-11-01-03-48.png)
:::

### `switch` 中的 `break` 语句

::: details 书本内容
![4-8-1-2021-08-11-01-04-01](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-8-1-2021-08-11-01-04-01.png)
:::

### `default` 子句

::: details 书本内容
![20210811004151-2021-08-11-00-41-51](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210811004151-2021-08-11-00-41-51.png)
:::

### `switch` 语句的执行过程

::: details 书本内容
![4-8-3-2021-08-11-01-04-17](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-8-3-2021-08-11-01-04-17.png)
:::

## `goto` 语句

::: details 书本内容
![4-9-2021-08-11-01-04-28](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-9-2021-08-11-01-04-28.png)
:::

## 总结

::: details 书本内容
![4-10-2021-08-11-01-04-39](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/4-10-2021-08-11-01-04-39.png)
:::

## 问题


<h4 id='q1'></h4>

1. 下面的表达式是否合法？如果合法，它执行了什么任务？

```c
3 * x * x - 4 * x + 6;
```

:::details 答案
* 这条语句是合法的
* 但是并没有执行任何任务
  * 语句中的操作符并没有任何负作用
  * 而且表达式语句的结果并没有赋值给任何值

:::

<h4 id='q2'></h4>

2. 赋值语句的语法是怎样的？

:::details 答案
* C 语言中并没有赋值语句， C 语言的赋值是借助赋值操作符，在表达式语句中进行的，比如

```c
x = y + 3;
```

:::

<h4 id='q3'></h4>

4. 用下面这种方法使用代码块是否合法？如果合法，你是否曾经想这样使用？

```c
...
statement
{
  statement
  statement 
}
statement
```

:::details 答案
* 这种方式使用代码块是合法的
* 适用于引入仅在代码内有效的局部变量
:::

<h4 id='q4'></h4>

4. 当你编写 `if` 语句时，如果在 `then`子句(相当于紧跟着 `if` 的语句)中没有语句，但在 `else` 子句中有语句，你该如何编写？你还能改用其他形式来达到同样的目的吗

:::details 答案
* 可以使用空语句
  
  ```c
  if (condition)
    ;
  else
    statement
  ```

* 也可以对条件取反，将 `else` 中的子句移到 `if` 后面
  
  ```c
  if (!(condition))
    statement
  ```

:::

<h4 id='q5'></h4>

5. 下面的循环将产生什么样的输出？

```c
int  i;
  ...
  for( i = 0; i < 10; i += 1 )
    printf( "%d\n", i);
```

:::details 答案
将会从 `0` 打印至 `9`
:::

<h4 id='q6'></h4>

6. 什么时候使用 `while` 语句比使用 `for` 语句更加合适？

:::details 答案
当没有初始条化部分或者调整部分时，用 `while` 语句可能更合适
:::

<h4 id='q7'></h4>

7. 下面的代码片段用于把标准输入复制到标准输出，并计算字符的检验和(checksum)，它有什么错误吗？

```c
while( (ch = getchar()) != EOF )
  checksum += ch;
  putchar( ch );
printf( "Checksum = %d\n", checksum );
```

:::details 答案
* 没有语法错误
* 但是无法达到预期的效果
  * 因为 `putchar(ch)` 并不在 `while` 循环中
  * 因此程序只会在最后输出 `EOF`，但 `EOF` 在大多数系统中均不是一个合法的字符
:::

<h4 id='q8'></h4>

8. 什么时候使用do语句比使用while语句更加合适？

:::details 答案
* 当在条件错误时，循环体至少也需要执行一次情况下
:::


<h4 id='q9'></h4>

9. 下面的代码片段将产生什么样的输出？注意：位于左操作数和右操作数之间的 `%` 操作符用于产生两者相除的余数。


```c
for( i = 1; i <= 4; i += 1 ){
  switch( i % 2 ){
    case 0:
      printf( "even\n" );
    case 1:
      printf( "odd\n" );
  }
}
```

:::details 答案
* 由于 `case 0` 后的语句中不包含 `break`，所以对于偶数，会打印出两条语句
* 最终结果如下

```bash
odd
even
odd
odd
even
odd
```

:::

<h4 id='q10'></h4>

10. 编写一些语句，从标准输入读取一个整型值，然后打印一些空白行，空白行的数量由这个值指定

:::details 答案

```c
int n_lines;
int count;

scanf("%d", &n_lines);
for(count = 0; count < n_lines; count++)
{
  putchar('\n');
}
```

:::


<h4 id='q11'></h4>

11. 写一些语句，用于对一些已经读入的值进行检验和报告。如果x小于y，打印单词WRONG。同样，如果a大于或等于b，也打印WRONG。在其他情况下，打印RIGHT。注意：||操作符表示逻辑或，你可能要用到它。


:::details 答案

```c
if(x < y || a >= b)
  printf("WRONG\n");
else
  printf("RIGHT\n");
```

:::

<h4 id='q12'></h4>

12. 能够被4整除的年份是闰年，但其中能够被100整除的却不是闰年，除非它同时能够被400整除。请编写一些语句，判断year这个年份是否为闰年，如果它是闰年，把变量leap_year设置为1，如果不是，把leap_year设置为0。


:::details 答案

```c
if (year % 400 == 0 || (year % 4 == 0 && year % 100))
  leap_year = 1;
else
  leap_year = 0;
```

:::

<h4 id='q13'></h4>

13. 新闻记者都受过训练，善于提问谁？什么？何时？何地？为什么？请编写一些语句，如果变量which_word的值是1，就打印who；如果值为2，打印what，依次类推。如果变量的值不在1到5的范围之内，就打印don’t know。


:::details 答案

```c
switch (which_word)
{
  case 1:
    printf("who");
    break;
  case 2:
    printf("what");
    break;
  case 3:
    printf("when");
    break;
  case 4:
    printf("where");
    break;
  case 5:
    printf("why");
    break;
  default:
    printf("don't know");
}
```

:::


<h4 id='q14'></h4>

<!-- TODO 原题目存在错误 -->

14. 假定由一个“程序”来控制你，而且这个程序包含两个函数：eat_hamburger()用于让你吃汉堡包，hungry()函数根据你是否饥饿返回真值或假值。请编写一些语句，允许你在饥饿感得到满足之前爱吃多少汉堡包就吃多少。

:::details 答案

```c
while (hungry())
  eat_hamburger();
```

:::

<h4 id='q15'></h4>

15．修改你对问题14的答案，使它能够让你的祖母满意——就是你已经吃过一些东西了。也就是说，你至少必须吃一个汉堡包。

:::details 答案

```c
do
  eat_hamburger();
while(hungry());
```

:::

<h4 id='q16'></h4>

16. 编写一些语句，根据变量precipitating和temperature的值打印当前天气的简单总结。

:::details 答案

```c
if (precipitating)
  if (temperature < 32)
    printf("snowing");
  else
    printf("raining");
else
  if (temperature < 60)
    printf("cold");
  else
    printf("warm");
```

:::

## 编程练习

<h4 id='p1'></h4>

1. 数n的平方根可以通过计算一系列近似值来获得，每个近似值都比前一个更加接近准确值。第一个近似值是1，接下来的近似值则通过下面的公式来获得。
$$a_{i+1} = \frac{a_i + \frac{n}{a_i}}{2}$$

编写一个程序，读入一个值，计算并打印出它的平方根。如果你将所有的近似值都打印出来，你会发现这种方法获得准确结果的速度有多快。原则上，这种计算可以永远进行下去，它会不断产生更加精确的结果。但在实际中，由于浮点变量的精度限制，程序无法一直计算下去。当某个近似值与前一个近似值相等时，你就可以让程序停止继续计算了。

:::details 答案

* 代码

<<< docs/02.编程语言/02.C/01.C和指针/code/ch4/q1.c#code

* 输出

```bash
Please Enter a positive number: 2
1.500000e+00
1.416667e+00
1.414216e+00
1.414214e+00
1.414214e+00
The square root of 2 is 1.41421
```

```bash
Please Enter a positive number: 32
1.650000e+01
9.219697e+00
6.345263e+00
5.694198e+00
5.656977e+00
5.656854e+00
5.656854e+00
The square root of 32 is 5.65685
```

::: tip
* `float` 的有效字位数有限, 超出有效字位数的部分会被截断，所以可以用来判断 $a_{i+1}$ 和 $a_i$ 是否相等的方法来结束程序的运行
* `float` 能表示的有效数字位数在 IEEE 754 的定义下是 7 位十进制，使用 %e 表示时，输出小数点后的第 6 位即可，过多的小数点无实际意义
  * 对于规格化的浮点数，`float` ，二进制尾数首位固定为 1， 然后用 23 位来表示尾数
    * 能表示的有效十进制尾数的范围为 $[2^{23},\ 2^{24} - 1] = [8388608, 16777215]$，因此其有七位有效数字
      * 注意此处的 8388608 并不表示其不能表示像 7777777 这样的有效数字位数
  * 对于非规格化的浮点，二进制尾数首位固定为0，用 23 位来表示尾数
    * 能表示的有效十进制尾数的范围为 $[0, 2^{23} - 1] =[0, 8388607]$, 也可认为其大约具有 7 位有效数字(其无法表示像 9999999 这样的七位有效数字)
:::
