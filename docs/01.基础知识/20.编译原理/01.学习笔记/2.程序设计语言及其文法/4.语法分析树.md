---
author: 
  name: 木子识时务
  link: https://github.com/sbwcwso
editLink: true
title: 语法分析树
date: 2021-08-05 16:01:57
permalink: /pages/100e24/
categories: 
  - 编译原理
tags: 
  - null
---

# 语法分析树

```markmap
- [语法分析树](#语法分析树)
  - [CFG(2 型文法) 分析树](#cfg2-型文法-分析树)
  - [分析树是推导的图形化表示](#分析树是推导的图形化表示)
  - [短语, 直接短语和句柄](#短语-直接短语和句柄)
  - [二义性文法 (Ambiguous Grammar)](#二义性文法-ambiguous-grammar)
      - [二义性文法的判定](#二义性文法的判定)
```

---

## CFG(2 型文法) 分析树

> [2 型文法](/pages/cda182/#type-2-grammar2-型文法)

::: details 示意图
![示意图-2021-04-04-17-10-31](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/示意图-2021-04-04-17-10-31.png)
:::

::: note 分析树的特征
* **根节点**的标号为**文法开始符号**
* **内部结点**表示对一个产生式 $A\rightarrow \beta$ 的应用
  * 该结点的标号是此产生式左部 $A$，其是一个**非终结符**
  * 该结点的**子结点的标号**从左到右构成了**产生式的右部 $\beta$**
* **叶结点**的标号既可以是**非终结符**，也可以是**终结符**
  * 从左到右排列叶节点得到的符号串称为是这棵树的**产出**( yield )或**边缘**(frontier)
:::


## 分析树是推导的图形化表示

::: tip 由推导可得分析树
* 给定一个推导 $S\Rightarrow \alpha_1 \Rightarrow \alpha_2 \Rightarrow \cdots \Rightarrow \alpha_n$，对于推导过程中得到的每一个**句型**$\alpha_i$，都可以构造出一个边缘为$\alpha_i$的**分析树**
:::

:::details 示例
![20210404171911-2021-04-04-17-19-11](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210404171911-2021-04-04-17-19-11.png)
* 对应于此推导过程，相当于每推导一步将树增加一层
:::

## 短语, 直接短语和句柄
<!-- TODO  补充数学定义 -->
::: theorem 定义
* 给定一个**句型**，其语法分析树中的每一棵**子树的边缘**称为该**句型**的一个**短语**(phrase)
* 如果子树只有父子两代结点，那么这棵子树的边缘称为该**句型**的一个**直接短语**(immediate phrase)
  * 直接短语一定是某产生式的右部
    * 因为分析树的内部结点一定是非终结符
  * 但产生式的右部不一定是**给定句型**的直接短语
* 一个**句型**的**最左直接短语**称为该句型的**句柄**
  * 此处的**最左**是指向分析树的最左一棵只有父子两代结点的**子树**
  * 定义为**最左**是为了自底向上进行语法分析时使用

:::

::: tip
短语，直接短语和句柄都是针对特定[句型](/pages/556375/#句型和句子)的
:::

::: details 示例 1
![2-2021-04-04-17-24-23](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/2-2021-04-04-17-24-23.png)
* 此示例的句型是 $-(E+E)$
* 句柄为 $E+E$
:::

::: details 示例2
![20210806090805-2021-08-06-09-08-05](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210806090805-2021-08-06-09-08-05.png)

* 句子： 提高人民生活水平
  * 短语
    * 提高人民生活水平
    * 提高
    * 人民生活水平
    * 人民
    * 生活水平
    * 生活
    * 水平
  * 直接短语
    * 提高
    * 人民
    * 生活
    * 水平
  * 句柄
    * 提高
:::


## 二义性文法 (Ambiguous Grammar)

* 如果一个文法可以为某个句子生成**多棵分析树**，则称这个文法是二义性的
:::details if else 语句的二义性
  * ![20210404172823-2021-04-04-17-28-23](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210404172823-2021-04-04-17-28-23.png)
:::
* 二义性可以通过**消歧规则**来消除
  * 如对于 `if` 语句，其消歧规则为每个`else`和最近的尚未匹配的`if`匹配
    :::details 则只有下列一种语义
    * ![20210404173214-2021-04-04-17-32-14](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210404173214-2021-04-04-17-32-14.png)
    :::

#### 二义性文法的判定

* 对于任意一个上下文无关文法，不存在一个算法，判定它是无二义性的；
* 但能给出一组**充分条件**，满足这组充分条件的文法是无二义性的
  * 满足，肯定无二义性
  * 不满足，也未必就是有二义性的

* 后续讲述的 [LL(1) 文法](/pages/acf8bd)即是判断 CFG 是否是无二义性的一组充分条件