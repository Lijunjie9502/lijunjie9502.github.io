---
author: 
  name: 木子识时务
  link: https://github.com/sbwcwso
editLink: true
title: LR(1)分析
date: 2021-08-16 05:10:08
permalink: /pages/d9a03e/
categories: 
  - 
tags: 
  - 
---

# LR(1) 分析

::: tip SLR 分析中存在的问题
* SLR 只是简单地考察下一个输入符号 $b$ 是否属于与归约项目 $A→α$ 相关联的 $FOLLOW(A)$
  * 但 $b∈FOLLOW(A)$ 只是采用归约 $A \rightarrow α$ 的一个必要条件，而非充分条件
* 即 SLR 只能排除部分不合理的归约，但不能确保产生正确的规约
:::

<!-- more -->

```markmap
- [LR(1) 分析](#lr1-分析)
  - [规范 LR(1) 项目](#规范-lr1-项目)
  - [等价 LR(1) 项目](#等价-lr1-项目)
  - [LR(1) 自动机](#lr1-自动机)
  - [LR(1) 分析表构造算法](#lr1-分析表构造算法)
  - [LR(1) 文法](#lr1-文法)
```


## 规范 LR(1) 项目

:::theorem 特定位置，非终结符的后继符集合
* 对于产生式 $A \rightarrow \alpha$ 的归约，在**不同的使用位置**，A 会要求**不同的后继符号**
  * 在特定位置，$A$ 的后继符集合是 $FOLLOW(A)$ 的子集
::: details 示例
![20210826181858-2021-08-26-18-18-58](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210826181858-2021-08-26-18-18-58.png)
* 此语法分析树中
  * 对于 $L \rightarrow *R\cdot$ 的归约
    * 由于语法分析树中 $L$ 后跟着 $=$
    * 因此此时其后继符号集为 $\{=\}$，不包含 $\textdollar$
  * 对于 $R \rightarrow L\cdot$ 的归约
    * 由于 $S$ 的 FOLLOW 集中只含有 $\textdollar$
    * 因此其时其后继符号集为 $\{\textdollar\}$，不含有 $=$
:::

::: theorem 规范LR(1)项目的定义
* 将一般形式为 $[A→α · β, a]$ 的项称为 LR(1) 项
  * 其中
    * $A→αβ$ 是一个产生式
    * $a$ 是一个终结符(这里将 $\textdollar$ 视为一个特殊的终结符)
  * 它表示在当前状态下，$A$ 后面必须紧跟的终结符，称为该项的展望符 (lookahead)
:::tip
* LR(1) 中的 1 指的是 LR(1) 项的第二个分量的长度
* 在形如 $[A→α · β, a]$ 且 $β ≠ ε$ 的项中
  * 展望符 $a$ 没有任何作用
* 但是一个形如 $[A→α · , a]$ 的项中
  * 只有在下一个输入符号等于 $a $时才可以按照 $A→α$ 进行归约
  * 这样的 $a$ 的集合总是 $FOLLOW(A)$ 的[子集](/pages/7968e2/#子集和真子集)，而且它通常是一个[真子集](/pages/7968e2/#子集和真子集)
:::

## 等价 LR(1) 项目

::: tip
与 [LR(0) 分析中的等价项目]相比，等价 $LR(1)$ 项目需要变换后继符
:::


* 继承的后继符
* 自生的后继符

## LR(1) 自动机

::: details 示例: 转换图及分析表的构造

* 状态 8 和 10 的第一个项相同，但是后继符却不同，属于不同的状态

* 分析表对于归约动作进行限制，只有为后继符号时才采取归约动作

* 10, 12, 13 状态输入符号为 `=` 时会报错
  * 在进入这 3 个状态时，输入中已经包含了等号
* 状态 2 当下一个输入符号为 `=` 时，即使采取了归约动作，后续也会发生错误
* 比 SLR 多了 4 个状态
:::

* 同心的项目集的概念

* 需要对相应的算法进行修改

## LR(1) 分析表构造算法

## LR(1) 文法
