---
author: 
  name: 木子识时务
  link: https://github.com/sbwcwso
editLink: true
title: 自底向上分析概述
date: 2021-08-03 16:47:31
permalink: /pages/86c477/
categories: 
  - null
tags: 
  - null
---

# 自底向上分析概述


```markmap
- [自底向上分析概述](#自底向上分析概述)
  - [最右推导(Right-most Derivation, 规范推导)](#最右推导right-most-derivation-规范推导)
    - [最右句型 (规范句型)](#最右句型-规范句型)
  - [自顶向上的语法分析的特点](#自顶向上的语法分析的特点)
  - [句柄的定义](#句柄的定义)
  - [移入-归约分析](#移入-归约分析)
```

## 最右推导(Right-most Derivation, 规范推导)

:::note 在最右推导中，总是选择每个句型的<mark class='c3'>最右非终结符</mark>进行替换
* 最右推导的反向即为最左归约
  :::details 最右推导的推导过程
  ![20210407065756-2021-04-07-06-57-56](https://cdn.jsdelivr.net/gh/Lijunjie9502/PicBed@master/20210407065756-2021-04-07-06-57-56.png)
  :::


### 最右句型 (规范句型)

::: theorem 定义
* 如果 $S$ 经过若干步最右推导可得到 $\gamma$， 则记为 $S\Rightarrow^{*}_{rm} \gamma$
  * 称 $\gamma$ 是当前文法的**最右句型**(right-sentential form)
  * $\gamma$ 的形式为 $\alpha\beta w$
    * $\text{}w$ 为终结符号串
:::


## 自顶向上的语法分析的特点

:::note 特点
* 从分析树的**底部**(叶节点)向**顶部**(根节点)方向构造分析树
  * 可以看成是**将输入串 $\text{}w$ 归约为文法开始符号 $S$** 的过程
* 自底向上的语法分析采用**最左归约**方式（**反向**构造**最右推导**）
  * 自顶向下的语法分析采用**最左推导**方式
* 自底向上语法分析的通用框架
  * **移入-归约分析** (Shift-Reduce Parsing)
:::

## 句柄的定义

::: theorem 定义
* 如果有
  * $$S \Rightarrow_{rm}^{*} \alpha A w \Rightarrow_{rm} \alpha \beta w$$
  * 则产生式 $A\rightarrow \beta$ 是 $\alpha \beta w$ 的一个句柄
:::

::: tip
* $\alpha\beta w$ 是一个最右句型
  * $w$ 是只含有终结符的字符串
* 对于无二义性文法来说，其每个最右句型都有且只有一个句柄
  * 无二义性 $\Rightarrow$ 句型的语法分析树是唯一的 $\Rightarrow$ 给定句型的最右推导是唯一的
* 也可根据语法分析树对句柄进行定义，即句柄是句型的最左直接短语
  * > [短语, 直接短语和句柄](/pages/100e24/#短语-直接短语和句柄)
  * 更加直观
:::



## 移入-归约分析

::: details 示例
![20210811014145-2021-08-11-01-41-45](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210811014145-2021-08-11-01-41-45.png)
:::

::: tip
* 一旦栈顶出现当前最右句型的**句柄**，立即归约，形成最左归约
  * 即每次规约的符号串均为**句柄**
* 栈内符号串 + 剩余输入 = “规范句型”
  * 不包含 `$` 符号
  * 规范句型即为最右句型
* 归约的过程会形成语法树
:::

::: note 移入-归约分析的工作过程
* 在对**输入串**的一次**从左到右扫描**过程中，语法分析器将零个或多个输入符号**移入**到**栈**的顶端
  * 直到它可以对栈顶的一个文法符号串 $β$ 进行**归约**为止
* 然后，它将 $β$ **归约**为某个产生式的左部
* 语法分析器不断地**重复**这个循环， 直到
  * 检测到一个语法**错误**
    * 进入到这样的格局时，会报错并进入错误恢复过程
  * 栈中包含了开始符号且输入缓冲区为空
    * 当进入这样的格局时，语法分析器停止运行，并宣称**成功**完成了语法分析
:::

<h4 id="移入归约分析器可采取的4种动作"></h4>

:::note 移入-归约分析器可采取的 4 种动作
* 移入
  * 将下一个输入符号移到栈的顶端
* 归约
  * 被归约的符号串的**右端**必然处于栈顶
  * 语法分析器在栈中确定这个串的**左端**，并决定用哪个非终结符来替换这个串
* 接受
  * 宣布语法分析过程成功完成
* 报错
  * 发现一个语法错误，并调用错误恢复子例程
:::

:::note 移入-归约分析中的冲突
* 移入-归约冲突
  * 无法判断应该进行移入还是归约操作
* 归约-归约冲突
  * 无法在多个可能的归约动作中选择正确的归约动作

::: details 移入-归约冲突的示例
* 直接归约 $i_B$ 会产生错误
  * ![20210811020631-2021-08-11-02-06-32](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210811020631-2021-08-11-02-06-32.png)
* 先移入 $i_B$ 再归约，则会产生正确的结果
  * ![20210811020817-2021-08-11-02-08-17](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210811020817-2021-08-11-02-08-17.png)
:::


