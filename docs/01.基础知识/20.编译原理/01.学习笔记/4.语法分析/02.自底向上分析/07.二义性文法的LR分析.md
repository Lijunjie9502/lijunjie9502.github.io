---
author: 
  name: 木子识时务
  link: https://github.com/sbwcwso
editLink: true
title: 二义性文法的LR分析
date: 2021-08-16 05:52:45
permalink: /pages/25b463/
categories: 
  - 编译原理
tags: 
  - 
---

# 二义性文法的LR分析

```markmap
- [二义性文法的LR分析](#二义性文法的lr分析)
  - [二义性文法的特点](#二义性文法的特点)
  - [二义性算术表达式文法的 LR 分析](#二义性算术表达式文法的-lr-分析)
  - [二义性 `if` 语句文法的 LR 分析](#二义性-if-语句文法的-lr-分析)
  - [二义性文法的使用原则](#二义性文法的使用原则)
```

## 二义性文法的特点

:::note 二义性文法的特点
* 每个二义性文法都不可以直接使用 LR 分析
  * 但是可以用一些额外的规则来解决冲突
* 二义性文法更简短，自然
  * 因为为了消除二义性，往往需要引入额外的非终结符
:::details 例: 表示算术表达式的文法
* 二义性文法
  * ![20210827193826-2021-08-27-19-38-26](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210827193826-2021-08-27-19-38-26.png)
* 非二义性文法
  * ![20210827193845-2021-08-27-19-38-45](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210827193845-2021-08-27-19-38-45.png)
:::


## 二义性算术表达式文法的 LR 分析

:::note 二义性算术表达式的 LR 分析
* 二义性算术表达式的 LR(0) 状态机
  * ![20210827194033-2021-08-27-19-40-33](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210827194033-2021-08-27-19-40-33.png)
* $I_0 - I_9$ 为增广文法的 LR(0) 项集族
  * 如果采用 SLR 进行分析，则状态 $I_7$, $I_8$ 当输入为 $*$ 或 $+$ 时，会产生移入-归约冲突
* 可用**优先级**和**结合性**来解决冲突
  * 对于状态 $I_7$ 而言
    * 当下一个输入符号为 $+$ 时
      * 由于 $+$ 的结合性是自左向右的
      * 因此此时应采用产生式 $E\rightarrow E + E$ 进行归约
    * 当下一个输入符号为 $*$ 时
      * 由于 $*$ 的优先级比 $+$ 大
      * 因此此时应采取移入操作
  * 对于状态 $I_8$ 而言
    * 当下一个输入符号为 $+$ 时
      * 由于 $+$ 的优先级比 $*$ 小
      * 因此此时应采用产生式 $E\rightarrow E * E$ 进行归约
    * 当下一个输入符号为 $*$ 时
      * 由于 $*$ 的结合性是自左向右的
      * 因此此时也应采用产生式 $E\rightarrow E * E$ 进行归约
* 由上述分析可得，二义性文法的 SLR 分析表如下
  :::details 二义性算术表达式文法的 SLR 分析表
    ![20210830143159-2021-08-30-14-31-59](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210830143159-2021-08-30-14-31-59.png)
:::

> * 参照[非二义性算术表达式文法的 SLR 分析](/pages/db0140/#表达式文法的SLR分析)

## 二义性 `if` 语句文法的 LR 分析

:::note <code>if</code> 语句文法的抽象表示
![20210830144709-2021-08-30-14-47-09](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210830144709-2021-08-30-14-47-09.png)
:::

::: note 二义性 `if` 语句文法的 LR 分析
* LR(0) 状态机
  * ![20210830160614-2021-08-30-16-06-14](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210830160614-2021-08-30-16-06-14.png)
* $I_0 - I_6$ 为增广文法的 LR(0) 状态集
* 如果直接使用 SLR 分析
  * 由于 $FOLLOW(S)= \{e, \textdollar\}$
  * 对于状态 $I_4$ 而言，当下一个输入为 $e$ 时，其会存在着移入-归约冲突
* 对于状态 $I_4$，根据正确的 "悬空-else" 冲突的解决办法
  * 当其下一个输入为 $e$ 时，其应采用移入操作
  * 由此可得二义性文法的 SLR 分析表
  :::details 二义性 <code>if</code> 语句文法的 SLR 分析表
  ![20210830161436-2021-08-30-16-14-36](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210830161436-2021-08-30-16-14-36.png)
:::

## 二义性文法的使用原则

::: warning 应该保守地使用二义性文法，并且必须在严格控制之下使用，因为稍有不慎就会导致语法分析器所识别的语言出现偏差
:::

