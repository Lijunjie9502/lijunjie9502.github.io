---
author: 
  name: 木子识时务
  link: https://github.com/sbwcwso
editLink: true
title: 滑动窗口协议
date: 2021-09-02 10:29:46
permalink: /pages/95dc8b/
categories: 
  - 计算机网络
tags: 
  - 
---

# 滑动窗口协议

```markmap
- [滑动窗口协议](#滑动窗口协议)
  - [流水线可靠数据传输协议](#流水线可靠数据传输协议)
  - [滑动窗口协议概述](#滑动窗口协议概述)
  - [GBN(Go-Back-N) 协议](#gbngo-back-n-协议)
  - [SR(Selective Repeat) 协议](#srselective-repeat-协议)
```

## 流水线可靠数据传输协议

:::note 流水线机制

:::

* 允许发送方在收到ACK之前连续发送多个分组
  * 更大的序列号范围
  * 发送方和/或接收方需要更大的存储空间以缓存分组

## 滑动窗口协议概述

* 滑动窗口协议： GBN, SR

## GBN(Go-Back-N) 协议

![20210902104258-2021-09-02-10-42-58](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210902104258-2021-09-02-10-42-58.png)

:::note GBN: 扩展 FSM
* 发送方扩展 FSM
  ::: details
  ![20210902104451-2021-09-02-10-44-51](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210902104451-2021-09-02-10-44-51.png)
* 接收方扩展 FSM
  :::details
  ![20210902143619-2021-09-02-14-36-19](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210902143619-2021-09-02-14-36-19.png)
:::

:::details GBN 示例
![20210902144133-2021-09-02-14-41-33](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210902144133-2021-09-02-14-41-33.png)
:::

## SR(Selective Repeat) 协议

::: note SR 协议的特点
* 接收方对每个分组单独进行确认
  * 设置缓存机制，缓存乱序到达的分组
* 发送方只重传那些没收到 ACK 的分组
  * 为每个分组设置定时器
* 发送方窗口
  * N 个连续的序列号
  * 限制已发送且未确认的分组
:::

::: note 发送方/接收方窗口
![20210902144728-2021-09-02-14-47-28](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210902144728-2021-09-02-14-47-28.png)
:::

:::details SR 协议示例
![20210902145148-2021-09-02-14-51-48](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210902145148-2021-09-02-14-51-48.png)
:::

::: danger SR 协议：困境
* 序列号空间大小与窗口尺寸需要满足：
* `k` 为分组序号字段的比特数
:::


