---
author: 
  name: 木子识时务
  link: https://github.com/sbwcwso
editLink: true
title: 关系的运算
date: 2021-08-26 08:37:52
permalink: /pages/70eae6/
categories: 
  - 离散数学
tags: 
  - 
---

# 关系的运算

::: tip 关系是一种特殊的集合，因此集合的所有基本运算（并、交、差、补），都可以应用到关系中，并且同样满足集合的所有运算定律
:::

<!-- more -->

```markmap
- [关系的运算](#关系的运算)
  - [关系的并交差补运算](#关系的并交差补运算)
  - [关系的复合运算](#关系的复合运算)
  - [关系的逆运算](#关系的逆运算)
```

## 关系的并交差补运算

::: tip 关系是一种特殊的集合，因此集合的所有基本运算（并、交、差、补），都可以应用到关系中，并且同样满足集合的所有运算定律
:::

::: theorem 定义
* 设 $R, S$ 是从 $A$ 到 $B$ 的两个关系，则
  * $R ∪ S = \{< x, y > |(xRy) ∨ (xSy)\}$
  * $R ∩ S = \{< x, y > |(xRy) ∧ (xSy)\}$
  * $R − S = \{< x, y > |(xRy) ∧ (x\not Sy)\}$
  * $\overline{R} = \{< x, y > |(x\not Ry)\}$ (即全集为 $A × B$)
:::

::: details 示例
* 设 $A = \{a, b, c\}，B = \{1, 2, 3, 4\}$，从 $A$ 到 $B$ 的关系 $R$ 和 $S$ 定义为：
  $$R = \{< a, 1 >, < b, 2 >, < c, 3 >\}, S = \{< a, 1 >, < a, 2 >, < a, 3 >, < a, 4 >\}$$
* 计算 $R ∪ S, R ∩ S, S − R, \overline{R}$
:::note 解
* $R ∪ S = \{< a, 1 >, < b, 2 >, < c, 3 >, < a, 2 >, < a, 3 >, < a, 4 >\}$
* $R ∩ S = \{< a, 1 >\}$
* $S − R = \{< a, 2 >, < a, 3 >, < a, 4 >\}$
* $$\begin{array}{l}
  R = A × B − R = \{< a, 1 >, < a, 2 >, < a, 3 >, < a, 4 >, \\
  < b, 1 >, < b, 2 >, < b, 3 >, <b, 4 >,\\
  < c, 1 >, < c, 2 >, < c, 3 >, < c, 4 >\} − \{< a, 1 >, < b, 2 >, < c, 3 >\}\\
  = \{< a, 2 >, <a, 3 >, < a, 4 >, < b, 1 >, < b, 3 >, < b, 4 >, < c, 1 >, < c, 2 >, < c, 4 >\}
\end{array}$$
:::



## 关系的复合运算

:::tip 关系特有，而集合没有的运算
:::

::: theorem 复合运算的定义
* 设 $A$ , $B$ , $C$ 是三个集合， $R$ 是从 $A$ 到 $B$ 的关系， $S$ 是从 $B$ 到 $C$ 的关系(即 $R : A→B, S : B→C$)
* 则 $R$ 与 $S$ 的复合关系(合成关系)(composite relation) $R \circ  S$ 是从 $A$ 到 $C$ 的关系
  * 并且：$R \circ  S = \{< x, z > |(x ∈ A) ∧ (z ∈ C) ∧ (∃y)(y ∈ B ∧ xRy ∧ ySz)\}$
  * 运算 $\circ $ 称为复合运算(composite operation)
:::

::: tip 用三种关系表示法进行复合运算
1. 集合表示法求复合
    * 寻找所有满足 $< x, y >∈ R$ 并且 $< y, z >∈ S$ 的序偶, 从而得到 $< x, z >∈ R\circ S$
2. 关系图表示法求复合
    * 将关系 $R, S$ 的关系图画在一起，然后寻找所有首尾相接的两条有向边，再去掉中间相接的结点 $y$，可得到 $R\circ S$ 的关系图
      * ![20210904152454-2021-09-04-15-24-54](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210904152454-2021-09-04-15-24-54.png)
3. 关系矩阵表示法求复合
    * 直接将关系 $R$ 和 $S$ 的关系矩阵做布尔积运算即得 $R \circ S$ 的关系矩阵
:::

::: details 复合运算示例
* 设 $A = \{a, b, c, d\}, B = \{b, c, d\}, C = \{a, b, d\}, R = \{< a, b >, < c, d >, < b, b >\}$ 是 $A$ 到 $B$ 的关系，$S = \{< d, b >, < b, d >, < c, a >\}$ 是 $B$ 到 $C$ 的关系
* 求 $R \circ S$
::: note 解
1. 集合表示法求解
    * $R \circ S = \{< a, d >, < c, b >, < b, d >\}$
2. 关系图形式
    * ![20210904153231-2021-09-04-15-32-31](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210904153231-2021-09-04-15-32-31.png)
3. 关系矩阵(布尔矩阵形式)
    * $$M_{R\circ S} = M_R \odot M_S = \begin{pmatrix}
      1 & 0 & 0\\
      1 & 0 & 0\\
      0 & 0 & 1\\
      0 & 0 & 0\\
    \end{pmatrix} \odot\begin{pmatrix}
    0 & 0 & 1\\
    1 & 0 & 0\\
    0 & 1 & 0\\
    \end{pmatrix} = \begin{pmatrix}
    0 & 0 & 1 \\
    0 & 0 & 1 \\
    0 & 1 & 0 \\
    0 & 0 & 0 \\
    \end{pmatrix}$$
:::

## 关系的逆运算

::: theorem 关系逆运算的定义
* $A, B$ 是两个集合，$R$ 是 $A$ 到 $B$ 的关系，则从 $B$ 到 $A$ 的关系
  $$R^{−1} = \{< b, a > | < a, b >∈ R\}$$
  * 称为 $R$ 的逆关系(inverse relation)
  * 运算 $^{−1}$ 称为逆运算(inverse operation)
:::


:::details 求逆运算示例
* 设 $A = \{1, 2, 3, 4\} B = \{a, b, c, d\}$，$R$ 是从 $A$ 到 $B$ 的一个关系
  * 且 $R=\{<1, a>, <2, c>, <3, b>, <4, b>, <4, d>\}$
:::note 求 R 的逆关系
* 集合表示法求解
  * $R^{-1} = \{<a, 1>, <c, 2>, <b, 3>, <b, 4>, <d, 4>\}$
* 关系图形式求解
  * ![20210917194759-2021-09-17-19-47-59](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210917194759-2021-09-17-19-47-59.png)
* 借助关系矩阵求解
  $$M_{R^{-1}}=(M_R)^T = \begin{pmatrix}
    1 & 0 & 0 & 0\\
    0 & 0 & 1 & 0\\
    0 & 1 & 0 & 0\\
    0 & 1 & 0 & 1\\
  \end{pmatrix}^{T} = \begin{pmatrix}
    1 & 0 & 0 & 0\\
    0 & 0 & 1 & 1\\
    0 & 1 & 0 & 0\\
    0 & 0 & 0 & 1\\
  \end{pmatrix}$$
:::

::: tip 逆运算总结
* 将 $R$ 的关系图中有向边的方向改变成相反方向即得 $R^{−1}$ 的关系图，反之亦然
* $R$ 和 $R^{−1}$ 的关系矩阵互为转置矩阵
* $R^{−1}$ 的定义域和值域正好是 $R$ 的值域和定义域，即 $domR = ranR^{−1}$，$domR^{−1} = ranR$
* $|R| = |R^{-1}|$
:::

