---
author: 
  name: 木子识时务
  link: https://github.com/sbwcwso
editLink: true
title: 主储存器
date: 2021-08-01 03:03:00
permalink: /pages/80d4a5/
categories: 
  - 计算机组成原理
tags: 
  - null
---

# 主储存器


```markmap
- [主储存器](#主储存器)
  - [概述](#概述)
    - [主存的基本组成](#主存的基本组成)
    - [主存和 CPU 的联系](#主存和-cpu-的联系)
    - [主存中存储单元地址的分配](#主存中存储单元地址的分配)
    - [主存的技术指标](#主存的技术指标)
  - [半导体芯片简介](#半导体芯片简介)
    - [半导体存储芯片的基本结构](#半导体存储芯片的基本结构)
    - [存储芯片片选线的作用](#存储芯片片选线的作用)
    - [存储芯片的译码驱动方式](#存储芯片的译码驱动方式)
      - [线选法](#线选法)
      - [重合法](#重合法)
  - [随机存取存储器 (RAM)](#随机存取存储器-ram)
    - [静态 RAM(SRAM)](#静态-ramsram)
      - [静态 RAM 基本电路的读操作](#静态-ram-基本电路的读操作)
      - [静态 RAM 基本电路的写操作](#静态-ram-基本电路的写操作)
      - [静态 RAM 芯片举例](#静态-ram-芯片举例)
    - [动态 RAM (DRAM)](#动态-ram-dram)
      - [动态 RAM 的基本单元电路](#动态-ram-的基本单元电路)
      - [三管动态 RAM 芯片 (Intel 1103)](#三管动态-ram-芯片-intel-1103)
      - [单管动态 RAM 4116 (16K × 1位 )](#单管动态-ram-4116-16k--1位-)
      - [动态 RAM 刷新](#动态-ram-刷新)
    - [静态 RAM 与动态 RAM 的对比](#静态-ram-与动态-ram-的对比)
  - [只读储存器(ROM)](#只读储存器rom)
    - [掩模 ROM(MROM)](#掩模-rommrom)
    - [PROM(一次性编程)](#prom一次性编程)
    - [EPROM(多次性编程)](#eprom多次性编程)
    - [EEPROM(多次性编程)](#eeprom多次性编程)
    - [Flash Memory(闪速型存储器)](#flash-memory闪速型存储器)
  - [⭐ 存储器与 CPU 的连接](#-存储器与-cpu-的连接)
    - [存储空量的扩展](#存储空量的扩展)
      - [位扩展](#位扩展)
      - [字扩展](#字扩展)
      - [字-位扩展](#字-位扩展)
    - [存储器与 CPU 的连接](#存储器与-cpu-的连接)
  - [存储器的校验](#存储器的校验)
    - [合法的代码集合](#合法的代码集合)
    - [纠错理论](#纠错理论)
    - [编码的最小距离](#编码的最小距离)
    - [汉明码](#汉明码)
  - [提高访存速度的措施](#提高访存速度的措施)
    - [单体多字系统](#单体多字系统)
    - [多体并行系统](#多体并行系统)
    - [高性能存储芯片](#高性能存储芯片)
```

## 概述

### 主存的基本组成

![20210801040833-2021-08-01-04-08-34](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210801040833-2021-08-01-04-08-34.png)

### 主存和 CPU 的联系

![20210801040951-2021-08-01-04-09-51](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210801040951-2021-08-01-04-09-51.png)

* 控制总线
  * 读写

### 主存中存储单元地址的分配

大端、大尾
小端、小尾

MW 中 W 为字

### 主存的技术指标

* 存储容量
* 存储速度
  * 存取时间
  * 存取周期
    * 比存取时间长 ❓
* 存储器的带宽
  * 位/秒

## 半导体芯片简介

* 译码驱动方式
  * 由存储单元的地址找到存储单元

### 半导体存储芯片的基本结构

![20210801042524-2021-08-01-04-25-24](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210801042524-2021-08-01-04-25-24.png)

* 一横表示低电平有效

### 存储芯片片选线的作用

![20210801043100-2021-08-01-04-31-00](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210801043100-2021-08-01-04-31-00.png)

每八个一组，每一组的片选线连接在一起

### 存储芯片的译码驱动方式

#### 线选法

![20210801043640-2021-08-01-04-36-40](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210801043640-2021-08-01-04-36-40.png)

线性阵列，排线较多

#### 重合法

![20210801043930-2021-08-01-04-39-30](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210801043930-2021-08-01-04-39-30.png)

二维阵列

## 随机存取存储器 (RAM)

:::tip 对存储器的基本问题
* 保存0和1的原理是什么？
  * 开关的打开和关闭
  * 熔丝
    * 断开后极难恢复
* 基本单元电路的构成是什么？
* 对单元电路如何读出和写入？
* 典型芯片的结构是很么样子的？
:::

### 静态 RAM(SRAM)

:::details 基本电路图
![20210810221901-2021-08-10-22-19-01](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810221901-2021-08-10-22-19-01.png)
:::

* 由双稳态触发器来储存 0，1
  * $T_1 ~ T_4$ 触发器
* 控制读写
  * $T_5, T_6$ 行开关

* 写入分两个方向，三态门取反

#### 静态 RAM 基本电路的读操作

::: details 示意图
![20210810222214-2021-08-10-22-22-14](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810222214-2021-08-10-22-22-14.png)
:::

#### 静态 RAM 基本电路的写操作

::: details 示意图
![20210810222347-2021-08-10-22-23-47](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810222347-2021-08-10-22-23-47.png)
:::

#### 静态 RAM 芯片举例

::: details Intel 2114 外特性
![20210810222623-2021-08-10-22-26-23](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810222623-2021-08-10-22-26-23.png)
:::

::: details Intel 2114 RAM 矩阵 (64 × 64) 读

![20210810223102-2021-08-10-22-31-02](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810223102-2021-08-10-22-31-02.png)

* 每16列分为 1 组，共4组
:::

### 动态 RAM (DRAM)

::: tip 相关问题
* 保存0和1的原理是什么？
* 基本单元电路的构成是什么？
* 对单元电路如何读出和写入？
* 典型芯片的结构是很么样子的？
* 动态RAM芯片的如何进行读出和写入操作？
* 动态RAM为什么要刷新，刷新方法？
:::

#### 动态 RAM 的基本单元电路

::: details 读取数据基本原理示意图
![20210810224120-2021-08-10-22-41-20](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810224120-2021-08-10-22-41-20.png)

* 输出端要加入非门
:::

::: details 写入数据的基本原理示意图
![20210810224542-2021-08-10-22-45-42](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810224542-2021-08-10-22-45-42.png)
:::

#### 三管动态 RAM 芯片 (Intel 1103)

::: details 示意图
![20210810224825-2021-08-10-22-48-25](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810224825-2021-08-10-22-48-25.png)
:::


::: details 示意图

:::

#### 单管动态 RAM 4116 (16K × 1位 )

::: details 外特性
![20210810225134-2021-08-10-22-51-34](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810225134-2021-08-10-22-51-34.png)
:::

::: details 读 原理
![20210810225515-2021-08-10-22-55-15](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210810225515-2021-08-10-22-55-15.png)
:::

#### 动态 RAM 刷新

* 刷新的过程实质上是先将原存信息读出，再由刷新放大器形成原信息并重新写入的再生过程

* 2ms

* 电容中的电荷会慢慢的漏掉
  * 一段时间内不对电容信息进行再生，则信息会丢失
* 刷新与行地址有关
  * 每次刷新一行

* 集中刷新
  * 存取周期 0.5 us
  * 死区
    * 不能进行读写操作
  * 死时间率
* 分散刷新
  * 存取周期 1 us
  * 过度刷新

* 异步刷新

### 静态 RAM 与动态 RAM 的对比

* DRAM 用于作主存
* SRAM 用于缓存

## 只读储存器(ROM)

:::note 发展过程
* 早期的只读存储器
  * 在厂家就写好了内容
* 改进1
  * 用户可以自己写——一次性
* 改进2
  * 可以多次写——要能对信息进行擦除
* 改进3
  * 电可擦写——特定设备
* 改进4
  * 电可擦写——直接连接到计算机上
:::

### 掩模 ROM(MROM)

* 行列选择线交叉处有 MOS 管为“1”
* 行列选择线交叉处无 MOS 管为“0”

### PROM(一次性编程)

* 用熔丝的通断来表示信息
  * 熔丝断 为 “0”
  * 熔丝未断 为 “1”

![20210817133818-2021-08-17-13-38-18](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210817133818-2021-08-17-13-38-18.png)

### EPROM(多次性编程)

* N型沟道浮动栅 MOS 电路
* 可以用紫外线来全部擦除

### EEPROM(多次性编程)

* 电可擦写

### Flash Memory(闪速型存储器)

## ⭐ 存储器与 CPU 的连接

### 存储空量的扩展

#### 位扩展

* 用 2片 1K × 4位 存储芯片组成 1K × 8位 的存储器
  * 采用相同的片选
  * 10 根地址线，共用
    * 2 ^ 10 = 1024 = 1 K
  * 数据线分开输出，共 8 根数据线
![20210817194831-2021-08-17-19-48-31](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210817194831-2021-08-17-19-48-31.png)

::: tip 关键是把多个芯片当做一个芯片来用，保证同时进行操作
* 把两个芯片的片选用相同的信号线进行连接
:::

#### 字扩展

* 增加储存字的空量
* 2片 1K × 8位 存储芯片组成 2K × 8位 的存储器
* ![20210817195143-2021-08-17-19-51-43](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210817195143-2021-08-17-19-51-43.png)
* 两个芯片不能同时进行工作
  * 用一根地址线来作为片选信号，每次只有一个储存芯片工作

#### 字-位扩展

* 8片 1K × 4位 存储芯片组成 4K × 8位 的存储器用
  * 分成 4 个存储器，每个存储器包含两个储存芯片
  * 12 根地址线
    * 2 根地址线通过片选译码组成片选信号
      * 4 种输出
    * 每组芯片串联输出
  * 8 根地址线
    * 2 个存储芯片的片选信号相同，数据线并联输出

### 存储器与 CPU 的连接

* 地址线的连接
* 数据线的连接
* 读/写命令线的连接
* 片选线的连接
  * 有些地址用作片选线
  * 合理的选择储存芯片
* 合理选择存储芯片
* 其他
  * 时序、负载

* 书中例 4.1, 例 4.2

* 注意地址的标号从 `0` 开始
* ROM 芯片的读信号要接地
* 注意 ${\overline{\text{MREQ}}}$ 信号

## 存储器的校验

1. 为什么要对存储器的信息进行校验？
2. 为了能够校验出信息是否正确，如何进行编码？
3. 纠错或检错能力与什么因素有关？
4. 校验出信息出错后是如何进行纠错？
5. 除了我们教材上讲的校验码，你还知道哪些容错编码？，原理是什么？

### 合法的代码集合

::: details

:::

### 纠错理论

* 三倍冗余
  * 1 位错发生的概率大，按 1 位错纠结
* 四备份冗余
* 五备份冗余
* 书中为汉明码

### 编码的最小距离

$L-1=D+C(D \ge C)$

### 汉明码

* 分组**偶校验**

* 汉明码不是基于划分方式
  * 汉明码组和组之间有交叉

::: note 图解
* 分成3组，每组有1位校验位，共包括4位数据位
  * ![20210825163228-2021-08-25-16-32-28](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210825163228-2021-08-25-16-32-28.png)

* 分组方式
  * ![无标题-2021-08-25-16-34-53](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/无标题-2021-08-25-16-34-53.png)
  * 交叉的位置放的是两个位置和
  * 7 放在最中间
  * 3 个分组独特分别放 1， 2， 4
    * 为校验位
  * 校验的十进制编码即为出错的位置
:::

:::tip 假设每个分组只错 1 位
:::

* 第 i 组的位置编号都用二进制表示，从左到右其第 $i$ 位为 $1$
  * $2^i(i = 0, 1, 2, \cdots)$ 的位置为校验码的位置

* 添加的检测位数 $k$
  * $2^k \ge n + k + 1$
  * 相当于分为 $k$ 组

* 各检测位 $C_i$ 所承担的检测小组为

* 半加器 $\oplus$

* 汉明编码的最小距离为 3 ❓
* 奇配置的纠错过程 ❓

## 提高访存速度的措施

* CPU 每年 52%
* 内存第 10 年 50%

* 采用高速器件
* 采用层次结构 Cache - 主存
* 调整主存结构

### 单体多字系统

* 加长存储器的存储字长(增加存储器的带宽)
![20210825171114-2021-08-25-17-11-14](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210825171114-2021-08-25-17-11-14.png)

* 问题
  * 写入单字长
  * 取的指令不是连续存放

### 多体并行系统

* 并行读取储存体

* 高位交叉
![20210825203852-2021-08-25-20-38-52](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210825203852-2021-08-25-20-38-52.png)
  * 主要用于容量扩展

* 低位交叉

![20210825204338-2021-08-25-20-43-38](https://cdn.jsdelivr.net/gh/sbwcwso/PicBed@master/20210825204338-2021-08-25-20-43-38.png)

  * 主要用于搞高带宽

  * 用低位表示体号
* 在不改变存取周期的前提下，增加存储器的带宽
* 流水线

### 高性能存储芯片

* SDRAM(同步 DRAM)

* RDRAM
  * 书上说明不是很透彻

* 带 Cache 的 DRAM
  * 核心是存储阵列
  * 适合猝发式读取

⌛tag+todo 有习题课
